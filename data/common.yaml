---
# Default configuration for Pabawi module
# These values can be overridden in environment-specific or node-specific Hiera data

# Proxy management
pabawi::proxy_manage: true
pabawi::proxy_class: 'pabawi::proxy::nginx'

# Installation management
pabawi::install_manage: true
pabawi::install_class: 'pabawi::install::npm'

# Integration configuration
# Each integration has an 'enabled' key plus integration-specific parameters
pabawi::integrations:
  bolt:
    enabled: false
    project_path: '/opt/bolt-project'
    # project_path_source: 'https://github.com/example/bolt-project.git'
    # manage_package: false
    # command_whitelist: ['plan run', 'task run']
    # command_whitelist_allow_all: false
    # execution_timeout: 300000
  puppetdb:
    enabled: false
    server_url: 'https://puppetdb.example.com:8081'
    # port: 8081
    # ssl_enabled: true
    # ssl_cert: 'file:///etc/puppetlabs/puppet/ssl/certs/agent.pem'
    # ssl_key: 'file:///etc/puppetlabs/puppet/ssl/private_keys/agent.pem'
    # ssl_ca: 'file:///etc/puppetlabs/puppet/ssl/certs/ca.pem'
    # ssl_reject_unauthorized: true
  puppetserver:
    enabled: false
    server_url: 'https://puppet.example.com:8140'
    # port: 8140
    # ssl_enabled: true
    # ssl_cert: 'file:///etc/puppetlabs/puppet/ssl/certs/agent.pem'
    # ssl_key: 'file:///etc/puppetlabs/puppet/ssl/private_keys/agent.pem'
    # ssl_ca: 'file:///etc/puppetlabs/puppet/ssl/certs/ca.pem'
    # ssl_reject_unauthorized: true
    # inactivity_threshold: 3600
    # cache_ttl: 300000
    # circuit_breaker_threshold: 5
    # circuit_breaker_timeout: 60000
    # circuit_breaker_reset_timeout: 30000
  hiera:
    enabled: false
    control_repo_path: '/opt/control-repo'
    # control_repo_source: 'https://github.com/example/control-repo.git'
    # manage_package: false
    # config_path: 'hiera_pabawi.yaml'
    # environments: ['production']
    # fact_source_prefer_puppetdb: true
    # fact_source_local_path: '/var/lib/puppet/facts'
  ansible:
    enabled: false
    inventory_path: '/etc/ansible/inventory'
    # inventory_source: 'https://github.com/example/ansible-inventory.git'
    # playbook_path: '/etc/ansible/playbooks'
    # playbook_source: 'https://github.com/example/ansible-playbooks.git'
    # manage_package: false
    # execution_timeout: 300000
    # config: '/etc/ansible/ansible.cfg'

# Nginx proxy configuration
pabawi::proxy::nginx::ssl_enable: true
pabawi::proxy::nginx::ssl_self_signed: true
pabawi::proxy::nginx::listen_port: 443
pabawi::proxy::nginx::backend_port: 3000

# NPM installation configuration
pabawi::install::npm::install_dir: '/opt/pabawi'
pabawi::install::npm::repo_url: 'https://github.com/example42/pabawi.git'
pabawi::install::npm::version: 'main'
pabawi::install::npm::user: 'pabawi'
pabawi::install::npm::group: 'pabawi'
pabawi::install::npm::log_level: 'info'
pabawi::install::npm::auth_enabled: false
# pabawi::install::npm::jwt_secret: 'your-secret-key-here'
pabawi::install::npm::database_path: '/var/lib/pabawi/pabawi.db'
pabawi::install::npm::concurrent_execution_limit: 5

# Docker installation configuration
pabawi::install::docker::image: 'example42/pabawi:latest'
pabawi::install::docker::container_name: 'pabawi'
pabawi::install::docker::auto_restart: true
pabawi::install::docker::install_dir: '/opt/pabawi'
pabawi::install::docker::log_level: 'info'
pabawi::install::docker::auth_enabled: false
# pabawi::install::docker::jwt_secret: 'your-secret-key-here'
pabawi::install::docker::database_path: '/var/lib/pabawi/pabawi.db'
pabawi::install::docker::concurrent_execution_limit: 5
pabawi::install::docker::ports:
  '3000': '3000'
